# JobCenter

> 任务中心，传统三层架构，非DDD架构，相当于只有基础设施层（Infrastructure模块和Web模块）。

## 低延迟调度中心方案

- 第一步是任务落库，所有的调度方案都要保证落库成功，同时任务状态以数据库为准。
-
第二步是任务定时，将jobId和actionTime设置到redis中，定时从redis中pop出超时任务的jobId，使用jobId查询出任务详细信息并交由任务处理器处理，最后更新任务库的任务状态。
  - 只使用数据库的场景下，将任务表拆分为rutime和history，以提高数据库的性能。

### 优点

- 将任务分散到多个槽中，每个槽是一个zset数据结构，可以快速查询出超时任务，同时支持横向拓展。
- 使用ElasticJob进行弹性调度，能保证在每一个分配在同一时刻只会被一个线程执行，不会出现重复调度。